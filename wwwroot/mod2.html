<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FinManage — Single File App (Pastel Animated BG, Forced Visible)</title>

<style>
  *{box-sizing:border-box} html,body{margin:0}

  :root{
    --primary:#6366f1; --secondary:#8b5cf6; --accent:#ec4899;
    --dark:#0b1220; --dark-1:#0f172a; --dark-2:#1e293b;
    --text:#0f172a; /* switched for better contrast on light pastel areas */
    --muted:#475569; --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
    --cardBg: rgba(255,255,255,.28); /* lighter cards since background is lighter */
    --cardBorder: rgba(15,23,42,.15);
    --cardShadow: rgba(15,23,42,.12);
  }

  /* Pastel animated background: fixed layer always visible */
  body{
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background: linear-gradient(125deg,#f5f3ff 0%, #fdf2f8 35%, #ecfeff 70%, #fef9c3 100%); /* LIGHT pastel base */
    color: var(--text);
    min-height:100vh; overflow-x:hidden; position:relative;
  }
  .bg-scene{
    position:fixed; inset:0; z-index:-1; pointer-events:none; overflow:hidden;
    background:
      radial-gradient(1200px 600px at 80% -10%, rgba(99,102,241,.12) 0%, rgba(99,102,241,0) 60%),
      radial-gradient(900px 450px at 10% 110%, rgba(20,184,166,.10) 0%, rgba(20,184,166,0) 60%);
  }
  .bg-gradient{
    position:absolute; inset:-20%;
    background:
      radial-gradient(35% 35% at 10% 12%, rgba(199,210,254,.38), transparent 60%),
      radial-gradient(40% 40% at 88% 22%, rgba(253,230,138,.34), transparent 60%),
      radial-gradient(34% 34% at 22% 88%, rgba(251,207,232,.34), transparent 60%),
      radial-gradient(36% 36% at 80% 85%, rgba(167,243,208,.28), transparent 60%);
    filter: blur(26px) saturate(1.1);
    animation: drift 36s ease-in-out infinite alternate;
    will-change: transform;
  }
  @keyframes drift{
    0%{transform: translate(-2%, -1%) scale(1)}
    50%{transform: translate(2%, 1%) scale(1.05)}
    100%{transform: translate(-1%, 2%) scale(1.02)}
  }
  .blob{position:absolute; width:620px; height:620px;
        border-radius:60% 40% 30% 70% / 100% 85% 92% 74%;
        filter: blur(60px); opacity:.22; mix-blend-mode:multiply}
  .blob.one{left:-140px; top:-140px;
            background: linear-gradient(47deg, rgba(199,210,254,.9), rgba(251,207,232,.6));
            animation: blobA 42s ease-in-out infinite}
  .blob.two{right:-180px; bottom:-180px;
            background: linear-gradient(47deg, rgba(253,230,138,.85), rgba(167,243,208,.55));
            animation: blobB 46s ease-in-out infinite}
  @keyframes blobA{
    0%{transform: translate(0,0) scale(1)}
    33%{transform: translate(60px,30px) scale(1.08) rotate(12deg)}
    66%{transform: translate(20px,80px) scale(0.98) rotate(-8deg)}
    100%{transform: translate(0,0) scale(1)}
  }
  @keyframes blobB{
    0%{transform: translate(0,0) scale(1)}
    40%{transform: translate(-60px,-30px) scale(1.06) rotate(-10deg)}
    100%{transform: translate(0,0) scale(1)}
  }
  .grain{
    position:absolute; inset:-2%;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="240" height="240"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.05"/></svg>');
    opacity:.12; mix-blend-mode:multiply; animation: grainShift 9s steps(10) infinite;
  }
  @keyframes grainShift{0%{transform:translate(0,0)}100%{transform:translate(-240px,-240px)}}

  /* NAV + Cards adapted to lighter theme but same layout and behavior */
  .nav{position:sticky;top:0;z-index:30;background:rgba(255,255,255,.55);backdrop-filter:blur(8px);
       border-bottom:1px solid rgba(15,23,42,.06)}
  .nav .inner{max-width:1150px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:34px;height:34px;border-radius:10px;background:conic-gradient(from 180deg,var(--primary),#22c55e,#4cc9f0,var(--primary));box-shadow:0 0 12px rgba(99,102,241,.35)}
  .name{font-weight:800;letter-spacing:.3px;color:#0f172a}
  .links{display:flex;gap:12px;flex-wrap:wrap}
  .links a{padding:8px 12px;border-radius:10px;color:#334155}
  .links a.active,.links a:hover{color:#0f172a;background:rgba(15,23,42,.06)}

  .container{max-width:1150px;margin:0 auto;padding:24px}
  .grid{display:grid;gap:18px}
  .cols-2{grid-template-columns:repeat(2,1fr)}
  .cols-3{grid-template-columns:repeat(3,1fr)}
  @media(max-width:980px){.cols-3{grid-template-columns:1fr 1fr}}
  @media(max-width:680px){.cols-3,.cols-2{grid-template-columns:1fr}}

  .card{
    background: var(--cardBg);
    border:1px solid var(--cardBorder);
    border-radius:16px;padding:18px;position:relative;overflow:hidden;
    box-shadow:0 8px 20px var(--cardShadow);
    transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease, background .25s ease;
    color:#0f172a;
  }
  .card:hover{transform:translateY(-4px);box-shadow:0 14px 32px rgba(15,23,42,.16);border-color:rgba(15,23,42,.2);background:rgba(255,255,255,.34)}
  .card-title{font-weight:800;margin:0 0 12px;color:#0f172a}
  .card-sub{color:#475569;font-size:14px;margin-top:6px}
  .hero{padding:48px 0 16px}
  .h1{font-size:34px;line-height:1.2;margin:0;color:#0f172a}
  .sub{color:#475569;margin-top:10px}

  .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid rgba(15,23,42,.08);
       background:linear-gradient(180deg,rgba(124,92,255,.14),rgba(124,92,255,.06));color:#0f172a;cursor:pointer;
       box-shadow:0 8px 18px rgba(124,92,255,.18);transition:transform .15s ease,box-shadow .15s ease}
  .btn:hover{transform:translateY(-2px)}
  .btn.secondary{background:linear-gradient(180deg,rgba(0,209,178,.16),rgba(0,209,178,.07));box-shadow:0 8px 18px rgba(0,209,178,.18)}
  .cta-btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:12px;border:1px solid rgba(99,102,241,.25);
           background:linear-gradient(135deg,#818cf8,#a78bfa);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 12px 28px rgba(129,140,248,.28)}
  .cta-btn:hover{transform:translateY(-2px);box-shadow:0 16px 36px rgba(129,140,248,.36)}
  .fx-btn{position:relative;display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:12px;border:1px solid rgba(99,102,241,.25);
          background:linear-gradient(135deg,#818cf8,#a78bfa);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 12px 28px rgba(129,140,248,.28);overflow:hidden;transition:transform .15s,box-shadow .15s}
  .fx-btn:hover{transform:translateY(-2px);box-shadow:0 16px 36px rgba(129,140,248,.36)}
  .fx-btn.secondary{background:linear-gradient(135deg,#34d399,#22d3ee)}
  .fx-btn .ripple{position:absolute;border-radius:50%;transform:scale(0);animation:ripple .6s linear;background:rgba(255,255,255,.5)}
  @keyframes ripple{to{transform:scale(4);opacity:0}}

  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:700px){.row{grid-template-columns:1fr}}
  .input, select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(15,23,42,.1);
                 background:rgba(255,255,255,.7);color:#0f172a;outline:none}
  .fx-input,.fx-select,.fx-number,.fx-date,.fx-textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(99,102,241,.25);
                 background:rgba(255,255,255,.75);color:#0f172a;outline:none;transition:box-shadow .2s,border-color .2s,transform .05s}
  .fx-textarea{min-height:120px;resize:vertical}
  .fx-input:focus,.fx-select:focus,.fx-number:focus,.fx-date:focus,.fx-textarea:focus{border-color:#a78bfa;box-shadow:0 0 0 4px rgba(167,139,250,.2),0 8px 24px rgba(129,140,248,.18)}
  .field{display:flex;flex-direction:column;gap:6px}
  .label{font-size:.9rem;color:#334155}

  .table{width:100%;border-collapse:collapse;margin-top:10px;color:#0f172a}
  .table th,.table td{padding:10px 8px;border-bottom:1px solid rgba(15,23,42,.08);text-align:left}
  .badge{padding:4px 8px;border-radius:999px;font-size:12px;color:#071016;background:#99f6e4}

  .kpi{display:flex;align-items:center;justify-content:space-between;background:linear-gradient(180deg,rgba(129,140,248,.12),rgba(129,140,248,.06));
       border:1px solid rgba(129,140,248,.25);border-radius:16px;padding:14px 16px;margin-bottom:12px;color:#0f172a}
  .kpi .value{font-size:1.2rem;font-weight:800}

  .module-shell{position:relative;padding:2rem;border-radius:20px;background:rgba(255,255,255,.55);
                border:1px solid rgba(129,140,248,.25);box-shadow:0 12px 30px rgba(15,23,42,.12);overflow:hidden}
  .module-shell::before,.module-shell::after{content:"";position:absolute;width:420px;height:420px;border-radius:50%;filter:blur(60px);opacity:.12;pointer-events:none}
  .module-shell::before{top:-160px;left:-160px;background:radial-gradient(circle,#c7d2fe,transparent 60%)}
  .module-shell::after{bottom:-180px;right:-180px;background:radial-gradient(circle,#fbcfe8,transparent 60%)}

  .module-header{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem}
  .module-title{font-size:1.6rem;font-weight:900;letter-spacing:.3px;background:linear-gradient(135deg,#0f172a,#334155);
                -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
  .module-sub{color:#475569}

  .data-card{background:rgba(255,255,255,.6);border:1px solid rgba(129,140,248,.2);border-radius:18px;padding:14px;transition:transform .2s,box-shadow .2s,border-color .2s;color:#0f172a}
  .data-card:hover{border-color:rgba(129,140,248,.45);box-shadow:0 10px 28px rgba(129,140,248,.2);transform:translateY(-2px)}

  .module-card{cursor:pointer}
  .module-card:hover{border-color:rgba(34,197,94,.35)}
  .module-card:hover{
  transform: perspective(900px) rotateX(6deg) rotateY(-6deg) translateY(-4px) scale(1.02);
  box-shadow: 0 18px 44px rgba(15,23,42,.20);
  border-color: rgba(34,197,94,.45);
}

/* Shine sweep */
.module-card::after{
  content:"";
  position:absolute; inset:-40% -60%;
  background: linear-gradient(120deg, rgba(255,255,255,.0) 30%, rgba(255,255,255,.35) 50%, rgba(255,255,255,0) 70%);
  transform: translateX(-120%) rotate(12deg);
  transition: transform .7s ease;
  pointer-events:none;
}
.module-card:hover::after{
  transform: translateX(120%) rotate(12deg);
}

/* Ambient floating ring behind content */
.module-card::before{
  content:"";
  position:absolute; width:220px; height:220px; border-radius:50%;
  top:-70px; right:-70px;
  background:
    radial-gradient(closest-side, rgba(129,140,248,.28), rgba(129,140,248,0) 70%),
    radial-gradient(closest-side, rgba(52,211,153,.22), rgba(52,211,153,0) 70%);
  filter: blur(10px) saturate(1.1);
  animation: floatRing 9s ease-in-out infinite alternate;
  pointer-events:none;
}
@keyframes floatRing{
  0%{ transform: translate(0,0) scale(1) }
  50%{ transform: translate(-8px,6px) scale(1.06) }
  100%{ transform: translate(6px,-6px) scale(1.03) }
}

/* Inner content slight parallax on hover */
.module-card .card-title, .module-card .card-sub{
  transition: transform .25s ease;
  will-change: transform;
}
.module-card:hover .card-title{ transform: translateZ(10px) }
.module-card:hover .card-sub{ transform: translateZ(6px) }

  .page{display:none}
  .page.active{display:block}

  .footer{color:#475569;padding:26px 0;text-align:center;border-top:1px solid rgba(15,23,42,.06);margin-top:32px;font-size:12px}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- Pastel animated background layer -->
<div class="bg-scene" aria-hidden="true">
  <div class="bg-gradient"></div>
  <div class="blob one"></div>
  <div class="blob two"></div>
  <div class="grain"></div>
</div>

<header class="nav">
  <div class="inner">
    <div class="brand"><div class="logo"></div><div class="name">FinManage</div></div>
    <nav class="links">
      <a href="#" data-link="home" class="active">Home</a>
      <a href="#" data-link="modules">Modules</a>
      <a href="#" data-link="graphs">Graphs</a>
      <a href="#" data-link="contact">Contact</a>
      <a href="#" data-link="login">Login</a>
    </nav>
  </div>
</header>

<!-- HOME -->
<main id="home" class="page active">
  <div class="container">
    <section class="hero">
      <h1 class="popping-title">Master your financial future</h1>
      <p class="sub">Track loans, plan budgets, log expenses, and visualize trends — all in one place.</p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
        <button class="cta-btn" data-link="login">Sign in / Login →</button>
      </div>
    </section>

    <section class="grid cols-3">
      <div class="card kpi">
        <div>
          <div class="card-title">Total Expenses</div>
          <div class="card-sub">All-time recorded</div>
        </div>
        <div class="value" id="home-total-expense">₹0</div>
      </div>
      <div class="card kpi">
        <div>
          <div class="card-title">Total Budgets</div>
          <div class="card-sub">Active allocations</div>
        </div>
        <div class="value" id="home-total-budget">₹0</div>
      </div>
      <div class="card kpi">
        <div>
          <div class="card-title">Outstanding Loans</div>
          <div class="card-sub">Principal minus paid</div>
        </div>
        <div class="value" id="home-outstanding">₹0</div>
      </div>
    </section>

    <section class="grid cols-2" style="margin-top:16px">
      <div class="card">
        <div class="card-title">Latest Expenses</div>
        <table class="table">
          <thead><tr><th>Title</th><th>Category</th><th>Date</th><th>Amount</th></tr></thead>
          <tbody id="home-latest"></tbody>
        </table>
      </div>
      <div class="card">
        <div class="card-title">Quick Actions</div>
        <p class="card-sub">Jump right into a module.</p>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
          <button class="btn" data-link="expense">Add Expense</button>
          <button class="btn secondary" data-link="budget">Set Budget</button>
          <button class="btn" data-link="loan">Add Loan</button>
          <button class="btn secondary" data-link="graphs">View Charts</button>
        </div>
      </div>
    </section>
  </div>
</main>

<!-- MODULES (second page) -->
<main id="modules" class="page">
  <div class="container">
    <section class="hero">
      <h1 class="h1">Choose a module</h1>
      <p class="sub">Hover to preview. Click to open its page.</p>
    </section>

    <section class="grid cols-2">
      <div class="card module-card" data-link="loan">
        <div class="card-title">Loan Management</div>
        <p class="card-sub">Add loans, set EMIs, track outstanding.</p>
      </div>
      <div class="card module-card" data-link="budget">
        <div class="card-title">Budget Management</div>
        <p class="card-sub">Allocate monthly budgets by category.</p>
      </div>
      <div class="card module-card" data-link="expense">
        <div class="card-title">Expense Tracker</div>
        <p class="card-sub">Log expenses and monitor totals.</p>
      </div>
      <div class="card module-card" data-link="graphs">
        <div class="card-title">Visual Reports</div>
        <p class="card-sub">Monthly and category charts.</p>
      </div>
    </section>
  </div>
</main>

<!-- LOGIN -->
<main id="login" class="page">
  <div class="container" style="max-width:560px">
    <section class="hero">
      <h1 class="h1">Welcome back</h1>
      <p class="sub">Sign in to continue</p>
    </section>
    <section class="card">
      <form onsubmit="event.preventDefault(); show('modules')">
        <div class="row">
          <div class="field">
            <label class="label">Email</label>
            <input type="email" class="input" placeholder="you@example.com" required />
          </div>
          <div class="field">
            <label class="label">Password</label>
            <input type="password" class="input" placeholder="••••••••" required />
          </div>
        </div>
        <div style="margin-top:12px;display:flex;gap:10px">
          <button class="cta-btn" type="submit">Login</button>
          <button class="btn secondary" type="button" data-link="home">Back Home</button>
        </div>
      </form>
    </section>
  </div>
</main>

<!-- LOAN -->
<main id="loan" class="page">
  <div class="container">
    <section class="module-shell" style="margin-bottom:1rem">
      <div class="module-header">
        <div>
          <div class="module-title">Loan Management</div>
          <div class="module-sub">Add loans, EMIs, and track outstanding</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="fx-btn secondary" data-link="modules">Back to Modules</button>
          <button class="fx-btn" data-link="home">Home</button>
        </div>
      </div>
      <div class="kpi">
        <div>Outstanding</div>
        <div class="value" id="loan-out">₹0</div>
      </div>
    </section>

    <section class="module-shell">
      <form id="loan-form" class="row">
        <div class="field"><label class="label">Lender</label><input class="fx-input" name="lender" required></div>
        <div class="field"><label class="label">Type</label>
          <select name="type" class="fx-select" required>
            <option>Personal</option><option>Home</option><option>Auto</option><option>Education</option>
          </select>
        </div>
        <div class="field"><label class="label">Start</label><input class="fx-date" type="date" name="start" required></div>
        <div class="field"><label class="label">End</label><input class="fx-date" type="date" name="end" required></div>
        <div class="field"><label class="label">Principal</label><input class="fx-number" type="number" step="0.01" name="principal" required></div>
        <div class="field"><label class="label">Monthly EMI</label><input class="fx-number" type="number" step="0.01" name="emi" required></div>
        <div class="field"><label class="label">Paid</label><input class="fx-number" type="number" step="0.01" name="paid" placeholder="0"></div>
        <div style="display:flex;gap:10px;align-items:end">
          <button class="fx-btn" type="submit">Add Loan</button>
          <button class="fx-btn secondary" type="button" id="loan-reset">Reset</button>
        </div>
      </form>
    </section>

    <section class="module-shell" style="margin-top:1rem">
      <div class="data-card">
        <div class="card-title">Loans</div>
        <table class="table">
          <thead><tr><th>Lender</th><th>Type</th><th>Term</th><th>Principal</th><th>EMI</th><th>Paid</th></tr></thead>
          <tbody id="loan-tbody"></tbody>
        </table>
      </div>
    </section>
  </div>
</main>

<!-- EXPENSE -->
<main id="expense" class="page">
  <div class="container">
    <section class="module-shell" style="margin-bottom:1rem">
      <div class="module-header">
        <div>
          <div class="module-title">Expense Tracker</div>
          <div class="module-sub">Log expenses and see totals update instantly</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="fx-btn secondary" data-link="modules">Back to Modules</button>
          <button class="fx-btn" data-link="home">Home</button>
        </div>
      </div>
      <div class="kpi"><div>Total Spent</div><div class="value" id="expense-total">₹0</div></div>
    </section>

    <section class="module-shell">
      <form id="expense-form" class="row">
        <div class="field"><label class="label">Title</label><input class="fx-input" name="title" required></div>
        <div class="field"><label class="label">Category</label>
          <select name="category" class="fx-select" required>
            <option>Food</option><option>Transport</option><option>Shopping</option>
            <option>Utilities</option><option>Health</option><option>Education</option><option>Other</option>
          </select>
        </div>
        <div class="field"><label class="label">Date</label><input class="fx-date" type="date" name="date" required></div>
        <div class="field"><label class="label">Amount</label><input class="fx-number" type="number" step="0.01" name="amount" required></div>
        <div style="display:flex;gap:10px;align-items:end">
          <button class="fx-btn" type="submit">Add Expense</button>
          <button class="fx-btn secondary" type="button" id="expense-reset">Reset</button>
        </div>
      </form>
    </section>

    <section class="module-shell" style="margin-top:1rem">
      <div class="data-card">
        <div class="card-title">Expense History</div>
        <table class="table">
          <thead><tr><th>Title</th><th>Category</th><th>Date</th><th>Amount</th></tr></thead>
          <tbody id="expense-tbody"></tbody>
        </table>
      </div>
    </section>
  </div>
</main>

<!-- BUDGET -->
<main id="budget" class="page">
  <div class="container">
    <section class="module-shell" style="margin-bottom:1rem">
      <div class="module-header">
        <div>
          <div class="module-title">Budget Management</div>
          <div class="module-sub">Set category budgets and track usage</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="fx-btn secondary" data-link="modules">Back to Modules</button>
          <button class="fx-btn" data-link="home">Home</button>
        </div>
      </div>
    </section>

    <section class="module-shell">
      <form id="budget-form" class="row">
        <div class="field"><label class="label">Category</label><input class="fx-input" name="category" required></div>
        <div class="field"><label class="label">Monthly Budget</label><input class="fx-number" type="number" step="0.01" name="amount" required></div>
        <div style="display:flex;gap:10px;align-items:end">
          <button class="fx-btn" type="submit">Save Budget</button>
          <button class="fx-btn secondary" type="button" id="budget-reset">Reset</button>
        </div>
      </form>
    </section>

    <section class="module-shell" style="margin-top:1rem">
      <div class="data-card">
        <div class="card-title">Budgets vs Spent</div>
        <table class="table">
          <thead><tr><th>Category</th><th>Budget</th><th>Spent</th><th>Usage</th></tr></thead>
          <tbody id="budget-tbody"></tbody>
        </table>
      </div>
    </section>
  </div>
</main>

<!-- GRAPHS -->
<main id="graphs" class="page">
  <div class="container">
    <section class="module-shell" style="margin-bottom:1rem">
      <div class="module-header">
        <div>
          <div class="module-title">Visual Reports</div>
          <div class="module-sub">Interactive charts with animated cards</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="fx-btn secondary" data-link="modules">Back to Modules</button>
          <button class="fx-btn" data-link="home">Home</button>
        </div>
      </div>
    </section>

    <section class="module-shell">
      <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap">
        <button class="btn" data-tab="monthly">Monthly</button>
        <button class="btn" data-tab="category">Categories</button>
      </div>

      <div id="chart-loader" style="display:flex;align-items:center;gap:10px;color:#475569;margin:8px 0">
        <span style="width:8px;height:8px;border-radius:50%;background:#a78bfa;animation:bounce 1s infinite"></span>
        <span style="width:8px;height:8px;border-radius:50%;background:#a78bfa;animation:bounce 1s infinite .15s"></span>
        <span style="width:8px;height:8px;border-radius:50%;background:#a78bfa;animation:bounce 1s infinite .3s"></span>
        <span>Preparing charts…</span>
      </div>

      <div class="grid cols-2">
        <div class="data-card">
          <div class="card-title">Monthly Expenses</div>
          <canvas id="chart-monthly-expenses" height="180"></canvas>
        </div>
        <div class="data-card">
          <div class="card-title">Current Month by Category</div>
          <canvas id="chart-category-pie" height="180"></canvas>
        </div>
      </div>
    </section>
  </div>
</main>

<!-- CONTACT -->
<main id="contact" class="page">
  <div class="container">
    <section class="hero">
      <h1 class="h1">Contact & Address</h1>
      <p class="sub">Reach out anytime. This is a static demo page.</p>
    </section>
    <section class="grid cols-2">
      <div class="card">
        <div class="card-title">Contact</div>
        <p class="card-sub">Email: hello@finmanage.example</p>
        <p class="card-sub">Phone: +91 98765 43210</p>
      </div>
      <div class="card">
        <div class="card-title">Address</div>
        <p class="card-sub">Mount Carmel Road, Bengaluru, Karnataka</p>
        <p class="card-sub">560052, India</p>
      </div>
    </section>
  </div>
</main>

<footer class="footer">
  <div class="container">FinManage UI — Local-only demo using localStorage and Chart.js</div>
</footer>

<script>
  // Routing
  const pages = ['home','modules','login','loan','expense','budget','graphs','contact'];
  function show(id){
    pages.forEach(p => document.getElementById(p).classList.toggle('active', p===id));
    document.querySelectorAll('.links a').forEach(a => a.classList.toggle('active', a.dataset.link===id));
    if(id==='home') populateHome();
    if(id==='expense') wireExpensePage(true);
    if(id==='budget') wireBudgetPage(true);
    if(id==='loan') wireLoanPage(true);
    if(id==='graphs') wireGraphsPage(true);
  }
  document.addEventListener('click', (e)=>{
    const link = e.target.closest('[data-link]');
    if(!link) return;
    e.preventDefault();
    show(link.dataset.link);
  });

  // Ripple on fx-btn
  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('.fx-btn');
    if(!btn) return;
    const circle = document.createElement('span');
    const d = Math.max(btn.clientWidth, btn.clientHeight);
    circle.style.width = circle.style.height = d+'px';
    const rect = btn.getBoundingClientRect();
    circle.style.left = (e.clientX - rect.left - d/2)+'px';
    circle.style.top = (e.clientY - rect.top - d/2)+'px';
    circle.className = 'ripple';
    btn.appendChild(circle);
    setTimeout(()=>circle.remove(), 600);
  });

  // Data helpers
  const KEYS = { expenses:'fm_expenses', budgets:'fm_budgets', loans:'fm_loans' };
  const read = (k) => JSON.parse(localStorage.getItem(k) || '[]');
  const write = (k, v) => localStorage.setItem(k, JSON.stringify(v));
  const sum = (arr, sel = x => x) => arr.reduce((a, c) => a + (+sel(c) || 0), 0);
  const monthKey = (d) => { const dt = new Date(d); return `${dt.getFullYear()}-${String(dt.getMonth()+1).padStart(2,'0')}`; };
  const fmt = (n) => new Intl.NumberFormat(undefined,{style:'currency',currency:'INR'}).format(+n||0);

  const Expenses = {
    all: () => read(KEYS.expenses),
    add: (e) => { const a = read(KEYS.expenses); a.push(e); write(KEYS.expenses, a); },
    byMonth: () => { const m={}; for(const e of read(KEYS.expenses)){ const k=monthKey(e.date); m[k]=(m[k]||0)+(+e.amount||0);} return m; },
    byCategoryMonth: () => {
      const r={}; for(const e of read(KEYS.expenses)){ const k=monthKey(e.date); r[k]=r[k]||{}; r[k][e.category]=(r[k][e.category]||0)+(+e.amount||0);} return r;
    }
  };
  const Budgets = {
    all: () => read(KEYS.budgets),
    upsert: (cat, amount) => { const a=read(KEYS.budgets); const i=a.findIndex(x=>x.category===cat);
      if(i>=0) a[i].amount=+amount; else a.push({category:cat, amount:+amount}); write(KEYS.budgets, a); }
  };
  const Loans = {
    all: () => read(KEYS.loans),
    add: (l) => { const a=read(KEYS.loans); a.push(l); write(KEYS.loans, a); },
    totalOutstanding: () => sum(read(KEYS.loans), x => (+x.principal||0) - (+x.paid||0))
  };

  // Home population
  function populateHome(){
    const exp = Expenses.all();
    const budgets = Budgets.all();
    const elExp = document.getElementById('home-total-expense'); if(elExp) elExp.textContent = fmt(sum(exp, x=>x.amount));
    const elBud = document.getElementById('home-total-budget'); if(elBud) elBud.textContent = fmt(sum(budgets, x=>x.amount));
    const elLoan = document.getElementById('home-outstanding'); if(elLoan) elLoan.textContent = fmt(Loans.totalOutstanding());
    const list = document.getElementById('home-latest'); if(list){
      list.innerHTML = exp.slice(-5).reverse().map(e=>`
        <tr><td>${e.title}</td><td>${e.category}</td><td>${new Date(e.date).toLocaleDateString()}</td><td>${fmt(e.amount)}</td></tr>
      `).join('');
    }
  }

  // Expense page
  function wireExpensePage(force=false){
    const tbody = document.getElementById('expense-tbody');
    const totalEl = document.getElementById('expense-total');
    const form = document.getElementById('expense-form');
    const resetBtn = document.getElementById('expense-reset');
    const render = () => {
      const all = Expenses.all().slice().reverse();
      if(tbody) tbody.innerHTML = all.map(e=>`
        <tr><td>${e.title}</td><td><span class="badge">${e.category}</span></td><td>${new Date(e.date).toLocaleDateString()}</td><td>${fmt(e.amount)}</td></tr>
      `).join('');
      if(totalEl) totalEl.textContent = fmt(sum(all, x=>x.amount));
    };
    if(form && (!form._wired || force)){
      form._wired = true;
      form.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        const fd = new FormData(form);
        Expenses.add({ title:fd.get('title'), category:fd.get('category'), date:fd.get('date'), amount:+fd.get('amount') });
        form.reset(); render();
      });
    }
    if(resetBtn && (!resetBtn._wired || force)){
      resetBtn._wired = true;
      resetBtn.addEventListener('click', ()=>{ write(KEYS.expenses, []); render(); });
    }
    render();
  }

  // Budget page
  function wireBudgetPage(force=false){
    const tbody = document.getElementById('budget-tbody');
    const form = document.getElementById('budget-form');
    const resetBtn = document.getElementById('budget-reset');
    const render = () => {
      const all = Budgets.all();
      const exp = Expenses.all();
      tbody.innerHTML = all.map(b=>{
        const spent = sum(exp.filter(e=>e.category===b.category), x=>x.amount);
        const pct = Math.min(100, Math.round((spent/(b.amount||1))*100));
        const bar = `<div style="width:100%;height:10px;background:rgba(15,23,42,.08);border-radius:999px;overflow:hidden"><div style="height:100%;width:${pct}%;background:linear-gradient(90deg,#7c5cff,#4cc9f0)"></div></div>`;
        return `<tr><td>${b.category}</td><td>${fmt(b.amount)}</td><td>${fmt(spent)}</td><td>${bar}</td></tr>`;
      }).join('');
    };
    if(form && (!form._wired || force)){
      form._wired = true;
      form.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        const fd = new FormData(form);
        Budgets.upsert(fd.get('category'), +fd.get('amount'));
        form.reset(); render();
      });
    }
    if(resetBtn && (!resetBtn._wired || force)){
      resetBtn._wired = true;
      resetBtn.addEventListener('click', ()=>{ write(KEYS.budgets, []); render(); });
    }
    render();
  }

  // Loan page
  function wireLoanPage(force=false){
    const tbody = document.getElementById('loan-tbody');
    const outEl = document.getElementById('loan-out');
    const form = document.getElementById('loan-form');
    const resetBtn = document.getElementById('loan-reset');
    const render = () => {
      const all = Loans.all().slice().reverse();
      tbody.innerHTML = all.map(l => `
        <tr><td>${l.lender}</td><td>${l.type}</td><td>${new Date(l.startDate).toLocaleDateString()} → ${new Date(l.endDate).toLocaleDateString()}</td><td>${fmt(l.principal)}</td><td>${fmt(l.emi)}</td><td>${fmt(l.paid||0)}</td></tr>
      `).join('');
      outEl.textContent = fmt(Loans.totalOutstanding());
    };
    if(form && (!form._wired || force)){
      form._wired = true;
      form.addEventListener('submit', (ev)=>{
        ev.preventDefault();
        const fd = new FormData(form);
        Loans.add({
          lender: fd.get('lender'), type: fd.get('type'),
          startDate: fd.get('start'), endDate: fd.get('end'),
          principal: +fd.get('principal'), emi: +fd.get('emi'), paid: +fd.get('paid')||0
        });
        form.reset(); render();
      });
    }
    if(resetBtn && (!resetBtn._wired || force)){
      resetBtn._wired = true;
      resetBtn.addEventListener('click', ()=>{ write(KEYS.loans, []); render(); });
    }
    render();
  }

  // Graphs
  let charts = { monthly:null, pie:null };
  function wireGraphsPage(){
    const loader = document.getElementById('chart-loader');
    if(loader) loader.style.display='flex';
    const ctx1 = document.getElementById('chart-monthly-expenses');
    const monthMap = Expenses.byMonth();
    const labels = Object.keys(monthMap).sort();
    const data = labels.map(k => monthMap[k]);
    if(window.Chart && ctx1){
      if(charts.monthly) charts.monthly.destroy();
      charts.monthly = new Chart(ctx1, {
        type:'bar',
        data:{ labels, datasets:[{ label:'Monthly Expenses', data, backgroundColor:'rgba(167,139,250,0.6)', borderColor:'rgba(129,140,248,1)', borderWidth:1, borderRadius:6 }]},
        options:{responsive:true,plugins:{legend:{labels:{color:'#0f172a'}}},scales:{x:{ticks:{color:'#334155'}},y:{ticks:{color:'#334155'}}}}
      });
    }
    const ctx2 = document.getElementById('chart-category-pie');
    if(window.Chart && ctx2){
      if(charts.pie) charts.pie.destroy();
      const catMonth = Expenses.byCategoryMonth();
      const now = new Date();
      const key = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}`;
      const cats = Object.keys(catMonth[key]||{});
      const vals = cats.map(c=>catMonth[key][c]);
      charts.pie = new Chart(ctx2, {
        type:'pie',
        data:{ labels:cats, datasets:[{ data:vals, backgroundColor:['#a78bfa','#34d399','#60a5fa','#fbbf24','#f472b6','#22c55e','#eab308','#06b6d4'] }]},
        options:{responsive:true,plugins:{legend:{labels:{color:'#0f172a'}}}}
      });
    }
    if(loader) loader.style.display='none';
  }

  // Initial load
  populateHome();
</script>

</body>
</html>
